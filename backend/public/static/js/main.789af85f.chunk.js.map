{"version":3,"sources":["images/pop-up/close_icon.svg","images/logo/mesto-logo.svg","images/element/delete.svg","images/button/pen.svg","images/logo-popup-message/true.svg","images/logo-popup-message/false.svg","components/Header.js","utils/workingWithToken.js","utils/ajax.js","utils/api.js","contexts/CurrentUserContext.js","components/Сard.js","components/Main.js","components/Footer.js","components/Popup.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/FormPage.js","components/Login.js","components/Register.js","components/InfoTooltip.js","components/ProtectedRoute.js","utils/authentication.js","utils/workingWithUser.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","withRouter","props","React","useState","mobileMenu","setMoobileMenu","isSignIn","location","pathname","mainPage","accountExit","className","userEmail","onClick","to","src","logo","alt","workingWithToken","localStorage","getItem","result","this","getToken","token","setItem","removeItem","Ajax","baseUrl","_baseUrl","_data","headers","authorization","Object","keys","length","method","body","contentType","_resetParameters","JSON","stringify","res","ok","json","Promise","reject","status","api","groupId","fetch","then","data","cardId","isLike","CurrentUserContext","createContext","Card","link","name","likes","onCardClick","onCardLike","onCardDelete","owner","currentUser","useContext","isOwn","_id","isLiked","some","i","console","log","buttonDelete","type","Main","onEditProfile","onAddPlace","onEditAvatar","handleCardClick","cards","setCards","useEffect","getCards","catch","error","avatar","about","pen","map","card","key","linkCard","Footer","Popup","title","children","isOpen","onClose","textButton","onSubmit","popupMessage","typeMessage","id","closeIcon","logoTrue","logoFalse","noValidate","ImagePopup","EditProfilePopup","setName","description","setDescription","onChangeName","e","preventDefault","target","value","onChangeAbout","PopupElementEditProfile","minLength","maxLength","onChange","pattern","required","onUpdateUser","EditAvatarPopup","onUpdateAvatar","linkCardRef","useRef","PopupElementEditAvatar","ref","placeholder","current","AddPlacePopup","nameCardRef","PopupElementAddCard","FormPage","onSubmitForm","typeForm","email","setEmail","password","setPassword","Login","login","Register","register","InfoTooltip","isVisible","onCloseInfoTooltip","ProtectedRoute","Component","component","loggedIn","authentication","workingWithUser","_groupId","isEditProfilePopupOpen","openEditProfilePopupClick","isAddPlacePopupOpen","openAddPlacePopupClick","isEditAvatarPopupOpen","openEditAvatarPopupClick","isDeleteCardPopupOpen","selectedCard","changeCurrentUser","infoTooltip","setInfoTooltip","setLoggedIn","getCurrentUser","getUserInfo","closeAllPopups","successfulLogin","saveToken","failedLogin","tokenCheck","deleteToken","history","push","Provider","path","signin","setTimeout","signup","addLikeOrDislikeCard","newCard","newCards","c","deleteCard","filter","exact","editProfileForm","editAvatar","addCard","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.789af85f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/close_icon.c2d0901f.svg\";","module.exports = __webpack_public_path__ + \"static/media/mesto-logo.94cbab21.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete.9c3b03ae.svg\";","module.exports = __webpack_public_path__ + \"static/media/pen.58afbe73.svg\";","module.exports = __webpack_public_path__ + \"static/media/true.7fc4c149.svg\";","module.exports = __webpack_public_path__ + \"static/media/false.c32299fa.svg\";","import React from 'react';\r\nimport logo from '../images/logo/mesto-logo.svg';\r\nimport { Link, withRouter } from 'react-router-dom'; \r\n\r\nfunction Header(props){\r\n\r\n    const [mobileMenu, setMoobileMenu] = React.useState(false);\r\n    const isSignIn = props.location.pathname === '/sign-in';\r\n    const mainPage = props.location.pathname === '/';\r\n\r\n    const setMenu = () => {\r\n        setMoobileMenu(!mobileMenu);\r\n    }\r\n\r\n    const accountExit = () => {\r\n        setMoobileMenu(false);\r\n        props.accountExit();\r\n    }\r\n\r\n    return(\r\n        <header className=\"header header-margin\">\r\n            {\r\n                mobileMenu && \r\n                <div className=\"header__menu\">\r\n                    <p className=\"header__email-user\">{props.userEmail}</p>\r\n                    <button className='header__exit' onClick={accountExit}>Выйти</button>\r\n                </div>\r\n            }\r\n            \r\n            <div className=\"header__main-container\">\r\n                <Link to=\"/\" className=\"header__href\">\r\n                    <img src={logo} alt=\"Логотип страницы мест в России\" className=\"header__logo\" />\r\n                </Link>\r\n                {\r\n                    mainPage ?\r\n                    <>  \r\n                        <div className={mobileMenu ? 'header__button-close-menu' : \"header__button-open-menu\"} onClick={setMenu}></div>\r\n                        <div className=\"header__container-right\">\r\n                            <p className=\"header__email-user\">{props.userEmail}</p>\r\n                            <Link to={`${isSignIn ? '/sign-up' : '/sign-in'}`} className='header__redirect' onClick={() => {\r\n                                if(!isSignIn){\r\n                                    accountExit();\r\n                                }\r\n                            }}>{isSignIn ? 'Регистрация' : 'Выйти'}</Link>\r\n                        </div>\r\n                    </> :\r\n                    <Link to={`${isSignIn ? '/sign-up' : '/sign-in'}`} className='header__redirect'>{isSignIn ? 'Регистрация' : 'Войти'}</Link>\r\n                }\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default withRouter(Header);\r\n","class WorkingWithToken{\r\n\r\n    getToken(){\r\n        return localStorage.getItem('jwt');\r\n    }\r\n\r\n    tokenCheck(){\r\n        let result = false;\r\n\r\n        if (this.getToken()){\r\n            result = true;;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    saveToken(token){\r\n        if (token){\r\n            localStorage.setItem('jwt', token);\r\n        }\r\n    }\r\n\r\n    deleteToken(){\r\n        localStorage.removeItem('jwt');\r\n    }\r\n}\r\n\r\nconst workingWithToken = new WorkingWithToken();\r\nexport default workingWithToken;","import workingWithToken from './workingWithToken';\r\nclass Ajax{\r\n\r\n    constructor(baseUrl){\r\n        this._baseUrl = 'http://api.students.nomoredomains.monster'; //process.env.REACT_APP_API_URL || 'http://127.0.0.1:3001'; \r\n        this._data = {\r\n            headers : {\r\n                authorization: workingWithToken.getToken()\r\n            }\r\n        };\r\n    }\r\n\r\n    _resetParameters(){\r\n        if(Object.keys(this._data).length > 1){\r\n            delete this._data.method;\r\n            delete this._data.body;\r\n            delete this._data.headers['Content-Type'];\r\n        }\r\n    }\r\n\r\n    _getData({method = \"GET\", body, contentType}){\r\n        this._resetParameters();\r\n\r\n        this._data.method = method;\r\n        if(body){\r\n            this._data.body = JSON.stringify(body);\r\n        }\r\n\r\n        if(contentType){\r\n            this._data.headers['Content-Type'] = contentType;\r\n        }\r\n    }\r\n\r\n    _getResult(res){\r\n        return res.ok ?\r\n                res.json() :\r\n                Promise.reject(`Ошибка: ${res.status}`);\r\n    }\r\n}\r\n\r\nexport default Ajax;","import Ajax from './ajax';\r\nclass Api extends Ajax{\r\n    constructor({baseUrl, groupId, authorization}){\r\n        super(baseUrl);\r\n        // this._groupId = groupId;\r\n        // super._data = {\r\n        //     headers: {\r\n        //         authorization: authorization\r\n        //     }\r\n        // };\r\n    }\r\n\r\n    getUserInfo(){\r\n        return fetch(`${this._baseUrl}/users/me`, this._data)\r\n                    .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n    getCards(){\r\n        return fetch(`${this._baseUrl}/cards`, this._data)\r\n                    .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n    addCard(data){\r\n\r\n        super._getData({\r\n            method: 'POST',\r\n            body: data,\r\n            contentType: 'application/json'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/cards`, this._data)\r\n                .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n    deleteCard(cardId){\r\n        super._getData({\r\n            method: 'DELETE'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/cards/${cardId}`, this._data)\r\n                .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n    addLikeOrDislikeCard(cardId, isLike){\r\n        super._getData({\r\n            method: isLike ? 'PUT' : 'DELETE'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/cards/${cardId}/likes`, this._data)\r\n                .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n\r\n    editProfileForm(data){\r\n        super._getData({\r\n            method: 'PATCH',\r\n            body: data,\r\n            contentType: 'application/json'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/users/me`, this._data)\r\n                .then(res => { return super._getResult(res) });\r\n    }\r\n\r\n    editAvatar(data){\r\n        super._getData({\r\n            method: 'PATCH',\r\n            body: data,\r\n            contentType: 'application/json'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/users/me/avatar`, this._data)\r\n                    .then(res => { return super._getResult(res) });\r\n    }\r\n}\r\n\r\n\r\nconst api = new Api({\r\n    // baseUrl: 'https://mesto.nomoreparties.co/v1',\r\n    // groupId: 'cohort-12',\r\n    // authorization: 'f77ffc2a-fabb-4e1a-b96f-391d240718e4'\r\n    // authorization: localStorage.getItem('')\r\n  });\r\n\r\nexport default api;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport buttonDelete from '../images/element/delete.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props){\r\n\r\n    const {link, name, likes, onCardClick, onCardLike, onCardDelete,  owner} = props;\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = owner[0] !== currentUser._id;\r\n    const isLiked = likes.some(i => i === currentUser._id);\r\n    console.log('props', props);\r\n    console.log('owner[0]', owner[0]);\r\n    function handleClick() {\r\n        onCardClick(link);\r\n      }\r\n\r\n    function handleLikeClick(){\r\n        onCardLike(props);\r\n    }  \r\n\r\n    function handleDeleteClick(){\r\n        onCardDelete(props);\r\n    }\r\n\r\n    return (\r\n        <article className=\"element\">\r\n            <img className=\"element__image\" src={`${link}`} onClick={handleClick}/>\r\n            <img \r\n                src={buttonDelete} \r\n                alt=\"Кнопка удаления карточки\" \r\n                className={`element__button-delete ${isOwn && 'element__button-delete_deactivation'}`} \r\n                onClick={handleDeleteClick}\r\n            />\r\n            <div className=\"element__container\">\r\n            <p className=\"element__text\">{name}</p>\r\n                <div className=\"element__container_likes\">\r\n                    <button \r\n                        type=\"button\" \r\n                        className={`element__button-like ${isLiked && 'element__button-like_action'}`} \r\n                        onClick={handleLikeClick}\r\n                    />\r\n                    <p className=\"element__count-like\">{likes.length}</p>\r\n                </div>\r\n            </div>\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport api from '../utils/api';\r\nimport Card from './Сard';\r\nimport pen from '../images/button/pen.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nexport default function Main({onEditProfile, onAddPlace, onEditAvatar, handleCardClick, onCardLike, cards, onCardDelete, setCards}){\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    \r\n    function showCards(){\r\n        api.getCards() \r\n            .then((res) => {\r\n                setCards(res);\r\n            })\r\n            .catch((error) => console.log('Ошибка при первичной загрузке карточек', error));\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        showCards();\r\n    },[]);\r\n\r\n    const {name, avatar, about} = currentUser;\r\n    \r\n    return(\r\n        <main className=\"main\">\r\n            <section className=\"profile\">\r\n            <div className=\"profile__container-avatar\">\r\n                <div className=\"profile__avatar-opacity\" src={`${pen}`} onClick={onEditAvatar}/>\r\n                <img alt=\"Аватарка пользователя\" className=\"profile__avatar\" src={`${avatar}`}/>\r\n            </div>\r\n            <div className=\"profile-info\">\r\n                <div className=\"profile-info__container\">\r\n                    <h1 className=\"profile-info__name\">{name}</h1>\r\n                    <button className=\"profile-info__edit-button\" type=\"button\" onClick={onEditProfile}/>\r\n                </div>\r\n                <p className=\"profile-info__information-person\">{about}</p>\r\n            </div>\r\n            <button className=\"profile__add-button\" type=\"button\" onClick={onAddPlace}/>\r\n            </section>\r\n            <section className=\"elements\">\r\n                {\r\n                    cards && \r\n                    cards.map((card) => \r\n                        <Card \r\n                            key={card._id} \r\n                            {...card}\r\n                            onCardClick={(linkCard) => handleCardClick(linkCard)}\r\n                            onCardLike={(card) => onCardLike(card)}\r\n                            onCardDelete={(card) => onCardDelete(card)}\r\n                        />)\r\n                }\r\n            </section>\r\n      </main>\r\n    );\r\n}","import React from 'react';\r\n\r\nexport default function Footer(props){\r\n    return(\r\n      <footer className=\"footer margin-footer\">\r\n        <p className=\"footer__copyright\">© 2020 Mesto Russia</p>\r\n      </footer>\r\n    );\r\n}","import React from 'react';\r\nimport closeIcon from '../images/pop-up/close_icon.svg';\r\nimport logoTrue from '../images/logo-popup-message/true.svg';\r\nimport logoFalse from '../images/logo-popup-message/false.svg';\r\n\r\nfunction Popup({title, name, children, isOpen, onClose, textButton, onSubmit, popupMessage = false, typeMessage}){\r\n\r\n        return(\r\n          <div className={`popup ${isOpen && 'popup_opened'}`} id={name}>\r\n            {\r\n              popupMessage ?\r\n                <div className={`popup__container popup__container_message`}>\r\n                  <img src={closeIcon} alt=\"Кнопка закрытия модального окна\" className=\"popup__icon-close popup__icon-close_message\" onClick={onClose}/>\r\n                  <img src={typeMessage ? logoTrue : logoFalse} alt={`Информационное модальное окно`} className='popup__icon-message'/>\r\n                  <h2 className='popup__message'>{`${typeMessage ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}`}</h2>\r\n                </div> \r\n                :\r\n                <form className=\"popup__container popup__container_form\" method=\"post\" onSubmit={onSubmit} noValidate>\r\n                  <img src={closeIcon} alt=\"Кнопка закрытия модального окна\" className=\"popup__icon-close popup__icon-close_form\" onClick={onClose}/>\r\n                  <h2 className=\"popup__title form-title\">{title}</h2>\r\n                  {children}\r\n                  <button className=\"popup__button form-button\" type=\"submit\">{textButton}</button>\r\n                </form>\r\n            }\r\n          </div>\r\n        );\r\n}\r\n\r\nexport default Popup;","import React from 'react';\r\nimport closeIcon from '../images/pop-up/close_icon.svg';\r\n\r\nfunction ImagePopup({card , onClose}){\r\n    \r\n    return(\r\n        <div className={`popup ${card ? 'popup_opened' : ''}`}>\r\n            <div className=\"popup__main-container\">\r\n                <div className=\"popup__footer-container\">\r\n                <img className=\"popup__view-photo-container\" src={card}/>\r\n                <img src={closeIcon} alt=\"Кнопка закрытия модального окна\" className=\"popup__icon-close icon-close-form_view-photo\" onClick={onClose}/>\r\n                </div>\r\n                <p className=\"popup__view-photo-info\" />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport Popup from './Popup.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props){\r\n    const {isOpen, onClose} = props;\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]);\r\n\r\n    function onChangeName(e){\r\n        e.preventDefault();\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function onChangeAbout(e){\r\n        e.preventDefault();\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        props.onUpdateUser({\r\n          name,\r\n          about: description,\r\n        });\r\n    }\r\n    \r\n    function PopupElementEditProfile(){\r\n        return (\r\n            <>\r\n                <input \r\n                    id=\"name_person\" \r\n                    className=\"popup__field popup__field_name_person form-field\" \r\n                    type=\"text\" \r\n                    name=\"namePerson\" \r\n                    minLength={2} \r\n                    maxLength={40} \r\n                    onChange={onChangeName}\r\n                    value={name}\r\n                    pattern=\"^[A-Za-zА-Яа-яЁё\\s\\-]+$\" \r\n                    required \r\n                />\r\n                <span id=\"name_person-error\" className=\"popup__field-error\" />\r\n                <input \r\n                    id=\"inform_person\" \r\n                    className=\"popup__field popup__field_inform_person form-field\" \r\n                    type=\"text\" \r\n                    name=\"informPerson\" \r\n                    minLength={2} \r\n                    maxLength={200}  \r\n                    onChange={onChangeAbout}\r\n                    value={description} \r\n                    required \r\n                />\r\n                <span id=\"inform_person-error\" className=\"popup__field-error\" />\r\n            </>\r\n        );\r\n    }\r\n    \r\n    return(\r\n        <Popup\r\n            onSubmit={handleSubmit}\r\n            children={<PopupElementEditProfile/>}\r\n            title='Редактировать профиль'\r\n            name ='popupEditProfile'\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            textButton='Сохранить'\r\n        />\r\n    );\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport Popup from './Popup.js';\r\n\r\nfunction EditAvatarPopup(props){\r\n    const {isOpen, onClose, onUpdateAvatar} = props;\r\n    const linkCardRef = React.useRef();\r\n\r\n    function PopupElementEditAvatar(){\r\n        return (\r\n            <>\r\n                <input id=\"link_avatar\" className=\"popup__field form-field\" type=\"url\" name=\"linkCard\" ref={linkCardRef} placeholder=\"Ссылка на картинку\" required />\r\n                <span id=\"link_avatar-error\" className=\"popup__field-error\" />\r\n            </>\r\n        );\r\n      }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        \r\n        onUpdateAvatar({\r\n            avatar: linkCardRef.current.value\r\n        });\r\n    }\r\n\r\n    return(\r\n        <Popup\r\n            onSubmit={handleSubmit}\r\n            children={<PopupElementEditAvatar/>}\r\n            title='Обновить аватар'\r\n            name ='popupEditAvatar'\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            textButton='Сохранить'\r\n        />\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport Popup from './Popup.js';\r\n\r\nfunction AddPlacePopup(props){\r\n    const {isOpen, onClose, onAddPlace} = props;\r\n    const nameCardRef = React.useRef();\r\n    const linkCardRef = React.useRef();\r\n\r\n    function PopupElementAddCard(){\r\n        return (\r\n            <>\r\n                <input \r\n                    id=\"name_card\" \r\n                    className=\"popup__field popup__field_name_card form-field\" \r\n                    type=\"text\" \r\n                    minLength={1} \r\n                    maxLength={30} \r\n                    name=\"nameCard\" \r\n                    placeholder=\"Название\" \r\n                    ref={nameCardRef}\r\n                    required \r\n                />\r\n                <span id=\"name_card-error\" className=\"popup__field-error\" />\r\n                <input \r\n                    id=\"link_card\" \r\n                    className=\"popup__field popup__field_link_card form-field\" \r\n                    type=\"url\" \r\n                    name=\"linkCard\" \r\n                    placeholder=\"Ссылка на картинку\" \r\n                    ref={linkCardRef}\r\n                    required \r\n                />\r\n                <span id=\"link_card-error\" className=\"popup__field-error\" />\r\n            </>\r\n        );\r\n      }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        onAddPlace({ \r\n            name: nameCardRef.current.value,\r\n            link: linkCardRef.current.value\r\n        });\r\n    }\r\n\r\n    return(\r\n        <Popup\r\n            onSubmit={handleSubmit}\r\n            children={<PopupElementAddCard/>}\r\n            title='Новое место'\r\n            name ='popupAddCard'\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            textButton='Создать'\r\n        />\r\n    );\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\nimport { Link } from 'react-router-dom'; \r\n\r\nfunction FormPage({title, textButton, onSubmitForm, typeForm}){\r\n\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    const onChangeEmail = (e) => {\r\n        setEmail(e.target.value);\r\n    }\r\n\r\n    const onChangePassword = (e) => {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        onSubmitForm({\r\n            password : password,\r\n            email : email\r\n        });\r\n    }\r\n\r\n    return(\r\n        <form className=\"form-page\" method=\"post\"  noValidate onSubmit={onSubmit}>\r\n            <h2 className=\"form-page__title form-title\">{title}</h2>\r\n                <input \r\n                    className=\"form-page__field form-field\" \r\n                    type=\"text\" \r\n                    minLength={2} \r\n                    maxLength={40} \r\n                    onChange={onChangeEmail}\r\n                    value={email}\r\n                    pattern=\"^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}$\"\r\n                    required \r\n                />\r\n                <input \r\n                    className=\"form-page__field form-field\" \r\n                    type=\"password\"  \r\n                    minLength={2} \r\n                    maxLength={200}  \r\n                    onChange={onChangePassword}\r\n                    value={password} \r\n                    required \r\n                />\r\n            <button className=\"form-page__button form-button\" type=\"submit\">{textButton}</button>\r\n            {\r\n                typeForm === 'register' && \r\n                <div className='form-page__container-label'>\r\n                    <p className='form-page__label'>{'Уже зарегистрированы?   '}   \r\n                    <Link to=\"/sign-in\" className='form-page__link'>\r\n                        Войти\r\n                    </Link>\r\n                    </p>\r\n                </div>\r\n            }\r\n        </form>\r\n    );\r\n\r\n}\r\n\r\nexport default FormPage;","import React from 'react';\r\nimport FormPage from './FormPage';\r\n\r\nfunction Login({login}){\r\n\r\n    return (\r\n        <FormPage\r\n            title='Вход'\r\n            textButton='Войти'\r\n            onSubmitForm={login}\r\n        />\r\n    );\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport FormPage from './FormPage';\r\n\r\nfunction Register({register}){\r\n\r\n    return(\r\n        <FormPage\r\n            title='Регистрация'\r\n            textButton='Зарегистрироваться'\r\n            onSubmitForm={register}\r\n            typeForm='register'\r\n        />\r\n    );\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport Popup from './Popup.js';\r\n\r\nfunction InfoTooltip({isVisible, typeMessage, onCloseInfoTooltip}){\r\n\r\n    return(\r\n        <Popup\r\n            isOpen={isVisible}\r\n            typeMessage={typeMessage}\r\n            popupMessage={true}\r\n            onClose={onCloseInfoTooltip}\r\n        />\r\n    );\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props}) => {\r\n    return(\r\n        <Route>\r\n            {\r\n                () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n            }\r\n        </Route>\r\n    )\r\n }\r\n\r\n export default ProtectedRoute;","import Ajax from './ajax';\r\n\r\nclass Authentication extends Ajax{\r\n    constructor({baseUrl}){\r\n        super();\r\n        // this._baseUrl = baseUrl;\r\n    }\r\n\r\n    signup(data){\r\n\r\n        super._getData({\r\n            method: 'POST',\r\n            body: data,\r\n            contentType: 'application/json'\r\n        });\r\n        \r\n        return fetch(`${this._baseUrl}/signup`, this._data).then(res => { \r\n            return super._getResult(res);\r\n         });\r\n    }\r\n\r\n    signin(data){\r\n\r\n        super._getData({\r\n            method: 'POST',\r\n            body: data,\r\n            contentType: 'application/json'\r\n        });\r\n\r\n        return fetch(`${this._baseUrl}/signin`, this._data).then(res => { return super._getResult(res) });\r\n    }\r\n\r\n\r\n    checkValidityToken(){\r\n        \r\n    }\r\n}\r\n\r\nconst authentication = new Authentication({\r\n    // baseUrl: 'http://127.0.0.1:3001'\r\n    // baseUrl: 'https://auth.nomoreparties.co'\r\n});\r\n\r\nexport default authentication;","import Ajax from './ajax';\r\nimport workingWithToken from './workingWithToken'\r\n\r\nclass WorkingWithUser extends Ajax{\r\n    constructor({baseUrl, groupId, authorization}){\r\n        super(baseUrl);\r\n        this._groupId = groupId;\r\n        super._data = {\r\n            headers: {\r\n                authorization: `Bearer ${workingWithToken.getToken()}`\r\n            }\r\n        };\r\n    }\r\n\r\n    getUserInfo(){\r\n        return fetch(`${this._baseUrl}/users/me`, this._data)\r\n                    .then(res => { return super._getResult(res) });\r\n    }\r\n}\r\n\r\nconst workingWithUser = new WorkingWithUser({\r\n    baseUrl: 'https://auth.nomoreparties.co'\r\n  });\r\nexport default workingWithUser;","import React from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport Popup from './Popup.js';\r\nimport '../index.css';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport { Route, Switch, withRouter, Redirect } from 'react-router-dom';\r\nimport InfoTooltip from './InfoTooltip'\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport authentication from '../utils/authentication';\r\nimport workingWithToken from '../utils/workingWithToken';\r\nimport workingWithUser from '../utils/workingWithUser'\r\n\r\nfunction PopupElementEditProfile(){\r\n  return (\r\n      <>\r\n          <input id=\"name_person\" className=\"popup__field popup__field_name_person\" type=\"text\" name=\"namePerson\" minLength={2} maxLength={40} pattern=\"^[A-Za-zА-Яа-яЁё\\s\\-]+$\" required />\r\n          <span id=\"name_person-error\" className=\"popup__field-error\" />\r\n          <input id=\"inform_person\" className=\"popup__field popup__field_inform_person\" type=\"text\" name=\"informPerson\" minLength={2} maxLength={200} required />\r\n          <span id=\"inform_person-error\" className=\"popup__field-error\" />\r\n      </>\r\n  );\r\n}\r\n\r\nfunction App(props) {\r\n\r\n  const [isEditProfilePopupOpen, openEditProfilePopupClick] = React.useState(false);\r\n  const [isAddPlacePopupOpen, openAddPlacePopupClick] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, openEditAvatarPopupClick] = React.useState(false);\r\n  const [isDeleteCardPopupOpen, openDeleteCardPopupClick] = React.useState(false);\r\n  const [selectedCard, handleCardClick] = React.useState('');\r\n  const [currentUser, changeCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [infoTooltip, setInfoTooltip] = React.useState({\r\n    isVisible : false,\r\n    typeMessage : false\r\n  });\r\n  const [userEmail, setEmail] = React.useState('');\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n\r\n  function getCurrentUser(){\r\n    //старый метод получение данных от пользователя\r\n    api.getUserInfo()\r\n      .then((res) => {\r\n        setLoggedIn(true);\r\n        changeCurrentUser(res);\r\n      })\r\n      .catch((error) => console.log('Ошибка при первичной загрузке данных пользователя', error));\r\n\r\n    //новый метод получение данных от пользователя\r\n    workingWithUser.getUserInfo()\r\n      .then((res) => {\r\n        if(res.data.email){\r\n          setEmail(res.data.email);\r\n        }else{\r\n          console.log('Ошибка, данных о email нет', res)\r\n        }\r\n      })\r\n      .catch((error) => console.log('Ошибка при первичной загрузке данных пользователя', error));;\r\n  }\r\n\r\n  function handleEditProfileClick(){\r\n    openEditProfilePopupClick(true);\r\n  }\r\n\r\n  function handleEditAvatarClick(){\r\n    openEditAvatarPopupClick(true);\r\n  }\r\n\r\n  function handleAddPlaceClick(){\r\n    openAddPlacePopupClick(true);\r\n  }\r\n\r\n  function closeAllPopups(){\r\n    openEditProfilePopupClick(false);\r\n    openEditAvatarPopupClick(false);\r\n    openAddPlacePopupClick(false);\r\n    handleCardClick('');\r\n  }\r\n\r\n  function handleUpdateAvatar(data){\r\n    api.editAvatar(data)\r\n    .then((res) => {\r\n      changeCurrentUser(res);\r\n      closeAllPopups();\r\n    })\r\n    .catch((error) => console.log('Ошибка при редактировании аватара пользователя', error));\r\n  }\r\n\r\n  function handleUpdateUser(data){\r\n    api.editProfileForm(data)\r\n      .then((res) => {\r\n        changeCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => console.log('Ошибка при редактировании данных пользователя', error));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    api.addLikeOrDislikeCard(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch((error) => console.log('Ошибка при добавления лайка', error));\r\n  }\r\n\r\n  function handleCardDelete(card){\r\n      api.deleteCard(card._id).then((newCard) => {\r\n          const newCards = cards.filter((c) => c._id !== card._id);\r\n          setCards(newCards);\r\n        });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(data){\r\n    api.addCard(data)\r\n      .then((newCard) => {\r\n        setCards([...cards, newCard]);\r\n        closeAllPopups();\r\n      });\r\n  }\r\n\r\n  function register(data){\r\n    authentication.signup(data)\r\n        .then(res => {\r\n          successfulLogin(data, res);\r\n          setTimeout(function(){\r\n            setInfoTooltip({\r\n              isVisible : false,\r\n              typeMessage : true\r\n            });\r\n            props.history.push('/sign-in');\r\n          }, 2000);\r\n        })\r\n        .catch(error => {\r\n          failedLogin();\r\n        });\r\n  }\r\n\r\n  function login(data){\r\n    authentication.signin(data)\r\n      .then(res => {\r\n        getCurrentUser();\r\n        successfulLogin(data, res);\r\n        setTimeout(function(){\r\n          setInfoTooltip({\r\n            isVisible : false,\r\n            typeMessage : true\r\n          });\r\n          props.history.push('/');\r\n        }, 2000);\r\n      })\r\n      .catch(error => {\r\n        failedLogin();\r\n      });\r\n  }\r\n\r\n  function successfulLogin(data, res){\r\n    setInfoTooltip({\r\n      isVisible : true,\r\n      typeMessage : true\r\n    });\r\n    setEmail(data.email);\r\n    setLoggedIn(true);\r\n    workingWithToken.saveToken(res.token);\r\n  }\r\n\r\n  function failedLogin(){\r\n    setInfoTooltip({\r\n      isVisible : true,\r\n      typeMessage : false\r\n    });\r\n  }\r\n\r\n  function onCloseInfoTooltip(){\r\n    setInfoTooltip({\r\n      isVisible : false,\r\n      typeMessage : false\r\n    });\r\n  }\r\n\r\n  function accountExit(){\r\n    setEmail('');\r\n    setLoggedIn(false);\r\n    workingWithToken.deleteToken();\r\n    props.history.push('/sign-in');\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const isThereToken = workingWithToken.tokenCheck();\r\n    if(isThereToken){\r\n      getCurrentUser();\r\n    }else{\r\n      workingWithToken.deleteToken();\r\n      props.history.push('/sign-in');\r\n    }\r\n  }, []);\r\n\r\n\r\n  console.log('this', this);\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"body\">\r\n        <div className=\"page\">\r\n\r\n          <Header userEmail={userEmail} accountExit={accountExit}/>\r\n\r\n          <Switch>\r\n\r\n            <Route path='/sign-in'>\r\n              <Login login={login}/>\r\n            </Route>\r\n\r\n            <Route path='/sign-up'>\r\n              <Register register={register}/>\r\n            </Route>\r\n\r\n            <ProtectedRoute \r\n              path=\"/\" \r\n              loggedIn={loggedIn} \r\n              component={Main}\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              handleCardClick={(linkCard) => handleCardClick(linkCard)}\r\n              cards={cards}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              setCards={setCards}\r\n            /> \r\n            \r\n          </Switch>\r\n\r\n          <Route path='/' exact >\r\n           <Footer/>\r\n          </Route>\r\n\r\n        </div>\r\n          \r\n        <EditProfilePopup \r\n          isOpen={isEditProfilePopupOpen} \r\n          onClose={closeAllPopups} \r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        \r\n        <EditAvatarPopup \r\n          isOpen={isEditAvatarPopupOpen} \r\n          onClose={closeAllPopups} \r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen} \r\n          onClose={closeAllPopups} \r\n          onAddPlace={handleAddPlaceSubmit}\r\n        />\r\n\r\n        <Popup\r\n            children={''}\r\n            title='Вы уверены?'\r\n            name ='popupDeleteCard'\r\n            isOpen={isDeleteCardPopupOpen}\r\n            onClose={closeAllPopups}\r\n            textButton='Да'\r\n        />\r\n\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopups}\r\n        />\r\n\r\n        <InfoTooltip {...infoTooltip} onCloseInfoTooltip={onCloseInfoTooltip}/>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default withRouter(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}